<div class="content">
    <div class="module-list">
        <ul class="object-list-element" *ngIf="rooms !== null" [ngClass]="{active: selectedRoom !== null}" #trainersList>
            <li class="object-item" *ngFor="let room of rooms" (click)="loadRoom(room)" [ngClass]="{active: this.selectedRoom && room.id == selectedRoom.id}">
                <h2 class="object-name">
                    {{room.title | wordCountLimit: 2 }}
                    <a *ngIf="getRoomPageUrl(room) !== null" [href]="getRoomPageUrl(room)" target="_blank"><i class="fa fa-external-link" aria-hidden="true"></i></a>
                </h2>
            </li>
        </ul>
        <div class="toolbar-element">
            <div (click)="openModal(createRoom)"><i class="fa fa-plus"></i></div>
            <div (click)="openModal(reorderRooms)"><i class="fa fa-bars"></i></div>
        </div>
    </div>
    <div class="module-editor module-editor-visible" [ngClass]="{'visible': selectedRoom != null}">
        <room-editor></room-editor>
    </div>
</div>
<ng-template #createRoom>
    <div class="modal-header">
        <h4 class="modal-title pull-left">Создать нового номера</h4>
        <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <label>
            Название:
        </label>
        <div>
            <input type="text" #newRoomName>
        </div>
    </div>
    <div class="modal-footer">
        <div class="buttons">
            <button type="button" class="ripple module-control-button-element default" (click)="createNewRoom(newRoomName.value)">Создать</button>
            <button type="button" class="ripple module-control-button-element delete" (click)="closeModal()">Отмена</button>
        </div>
    </div>
</ng-template>

<ng-template #reorderRooms>
    <div class="modal-header">
        <h4 class="modal-title">Поменять местами</h4>
        <button type="button" class="close" aria-label="Close" (click)="modalRef.hide()">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <bs-sortable *ngIf="rooms"
                     [(ngModel)]="rooms"
                     itemClass="sortable-item"
                     itemActiveClass="sortable-item-active"
                     placeholderItem="Drag here"
                     placeholderClass="placeholderStyle"
                     wrapperClass="sortable-wrapper"
                     fieldName="title"
        ></bs-sortable>
    </div>
    <div class="modal-footer">
        <div class="buttons">
            <button type="button" class="ripple module-control-button-element save" (click)="reorderApply();modalRef.hide();">Да</button>
            <button type="button" class="ripple module-control-button-element cancel" (click)="modalRef.hide()">Отмена</button>
        </div>
    </div>
</ng-template>