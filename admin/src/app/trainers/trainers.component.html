<div class="content">
    <div class="module-list">
        <ul class="object-list-element" *ngIf="trainers !== null" [ngClass]="{active: selectedTrainer !== null}" #trainersList>
            <li class="object-item" *ngFor="let trainer of trainers" (click)="loadTrainer(trainer)" [ngClass]="{active: this.selectedTrainer && trainer.id == selectedTrainer.id}">
                <h2 class="object-name">
                    {{trainer.name | wordCountLimit: 2 }}
                    <a *ngIf="detailPage !== null && getTrainerPageUrl(trainer) !== null" [href]="getTrainerPageUrl(trainer)" target="_blank"><i class="fa fa-external-link" aria-hidden="true"></i></a>
                </h2>
            </li>
        </ul>
        <div class="toolbar-element">
            <div (click)="openModal(createTrainer)"><i class="fa fa-plus"></i></div>
            <div (click)="openModal(reorderTrainers)"><i class="fa fa-bars"></i></div>
        </div>
    </div>
    <div class="module-editor module-editor-visible" [ngClass]="{'visible': selectedTrainer != null}">
        <trainer-editor></trainer-editor>
    </div>
</div>
<ng-template #reorderTrainers>
    <div class="modal-header">
        <h4 class="modal-title">Поменять местами</h4>
        <button type="button" class="close" aria-label="Close" (click)="modalRef.hide()">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <bs-sortable *ngIf="trainers"
                     [(ngModel)]="trainers"
                     itemClass="sortable-item"
                     itemActiveClass="sortable-item-active"
                     placeholderItem="Drag here"
                     placeholderClass="placeholderStyle"
                     wrapperClass="sortable-wrapper"
                     fieldName="name"
        ></bs-sortable>
    </div>
    <div class="modal-footer">
        <button type="button" class="save ripple module-control-button-element default" (click)="reorderApply();modalRef.hide();">Да</button>
        <button type="button" class="ripple module-control-button-element cancel" (click)="modalRef.hide()">Отмена</button>
    </div>
</ng-template>

<ng-template #createTrainer>
    <div class="modal-header">
        <h4 class="modal-title pull-left">Создать нового тренера</h4>
        <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <label>
            Имя:
        </label>
        <div>
            <input type="text" #newTrainerName>
        </div>
    </div>
    <div class="modal-footer">
        <div class="buttons">
            <button type="button" class="ripple module-control-button-element default" (click)="createNewTrainer(newTrainerName.value)">Создать</button>
            <button type="button" class="ripple module-control-button-element cancel" (click)="modalRef.hide()">Отмена</button>
        </div>
    </div>
</ng-template>